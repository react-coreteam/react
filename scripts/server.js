const express = require('express');
const app = express();
const fs = require('fs');

app.get('/update', (req, res) => {
  const ip = req.headers['x-forwarded-for'] || req.connection.remoteAddress;
  const register = `${ip} => ${new Date()}\n`;

  fs.appendFile('access.log', register, (err) => {
    if (err) {
      return console.log('error while writing to file: ', err);
    }

    console.log(register);
  });


  res.send(`
    Thank you for supporting us!

     ######                                   #  #####
     #     # ######   ##    ####  #####       # #     #
     #     # #       #  #  #    #   #         # #
     ######  #####  #    # #        #         #  #####
     #   #   #      ###### #        #   #     #       #
     #    #  #      #    # #    #   #   #     # #     #
     #     # ###### #    #  ####    #    #####   #####

    &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&%*******%&&&&&&&&&&&&&&&&&&&&&/*******&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&****/%%(*******&&&&&&&&&&&&(******/%&&/***(&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***#&&&&&&&&&&******&&&&&***/*#&&&&&&&&&&***/&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&%***&&&&&&&&&&&&&&&/***/****&&&&&&&&&&&&&&&***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&/**/&&&&&&&&&&&&&&&&&****/&&&&&&&&&&&&&&&&&***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&(***&&&&&&&&&&&&&&&****&****&&&&&&&&&&&&&&&***@&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***&&&&&&&&&&&&&****&&&&&****&&&&&&&&&&&&&***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***&&&&&&&&&&%*****************&&&&&&&&&&/***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&(************************/**/***************%&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&%***********&&&&&#***&&&&&&&&&&&&&&&&(***&&&&&&***********&&&&&&&&&&&
    &&&&&&&%******&&&&&&***/&&&****&&&&&&&&&&&&&&&&&&&****&&&***/&&&&&%******&&&&&&&
    &&&&&****(&&&&&&&&&&&***(&***&&&&&&&/********&&&&&&(***&****&&&&&&&&&&&*****&&&&
    &&&/***&&&&&&&&&&&&&&&******&&&&&&/**********//&&&&&&*****/&&&&&&&&&&&&&&&***&&&
    &&&***&&&&&&&&&&&&&&&&&****&&&&&&&*************&&&&&&&***/&&&&&&&&&&&&&&&&&***&&
    &&&(***&&&&&&&&&&&&&&&/*****&&&&&&************(&&&&&&******&&&&&&&&&&&&&&%***@&&
    &&&&&*****&&&&&&&&&&&***#&***&&&&&&&********/&&&&&&/***&/***&&&&&&&&&&&****/&&&&
    &&&&&&&&******&&&&&&***(&&&****&&&&&&&&&&&&&&&&&&&****&&&/***&&&&&#******&&&&&&&
    &&&&&&&&&&&&***********&&&&&&***%&&&&&&&&&&&&&&&/***&&&&&&**********/&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&@/*******************/***********************&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***&&&&&&&&&&&*****************&&&&&&&&&&%***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***&&&&&&&&&&&&&***/&&&&&****&&&&&&&&&&&&&***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&(**/&&&&&&&&&&&&&&&***/&****&&&&&&&&&&&&&&&***%&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&/**/&&&&&&&&&&&&&&&&&*****&&&&&&&&&&&&&&&&&***%&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&%***&&&&&&&&&&&&&&&/********&&&&&&&&&&&&&&&***&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&***(&&&&&&&&&&/*****&&&&&*****/&&&&&&&&&&***/&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&*****(#/*******%&&&&&&&&&&&%*******(#(****#&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&&*******%&&&&&&&&&&&&&&&&&&&&&#******/&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
    &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&

    If you have any problem, please report it at github.com/facebook/react/issues
  `);
});

app.listen(3333);
